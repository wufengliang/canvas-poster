{"code":"import { __awaiter } from \"tslib\";\n/*\n * @Author: wufengliang 44823912@qq.com\n * @Date: 2024-01-27 18:06:22\n * @LastEditTime: 2024-01-27 22:51:13\n * @Description:\n */\n/*\n * @Author: wufengliang 44823912@qq.com\n * @Date: 2024-01-27 18:06:22\n * @LastEditTime: 2024-01-27 20:15:47\n * @Description:\n */\nimport { BaseCanvasInstance } from './base';\nexport class BrowserCanvasInstance extends BaseCanvasInstance {\n    constructor(options) {\n        super(options);\n    }\n    /**\n     * 获取图片实例资源\n     */\n    getRenderImageInstance(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const image = new Image;\n            image.src = url;\n            return new Promise(resolve => {\n                image.onload = () => resolve(image);\n            });\n        });\n    }\n    drawCircleImage(data) {\n        const { ctx } = this;\n        const { x, y, width, height, value, id } = data;\n        const centerX = x + width / 2, centerY = y + height / 2;\n        const radius = Math.min(centerX, centerY);\n        ctx.save();\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n        ctx.clip();\n        ctx.drawImage(value, centerX - radius, centerY - radius, radius * 2, radius * 2);\n        ctx.restore();\n    }\n    drawNormalImage(data) {\n        const { ctx } = this;\n        const { x, y, width, height, value, id } = data;\n        ctx.save();\n        ctx.beginPath();\n        ctx.drawImage(value, x, y, width, height);\n        ctx.restore();\n    }\n    setTextStyle(value) {\n        const { ctx, defaultFontFamlily } = this;\n        const { fontSize = 12, fontFamlily = defaultFontFamlily, color = '#000', style = {} } = value;\n        ctx.font = `${fontSize}px ${fontFamlily}`;\n        ctx.fillStyle = color;\n        for (let key in style) {\n            if (key in ctx) {\n                ctx[key] = style[key];\n            }\n        }\n        return Object.assign(Object.assign({}, value), { fontSize, fontFamlily, color, style });\n    }\n}\n","references":["/Users/wufengliang/Documents/private-projects/canvas-poster/src/base.ts","/Users/wufengliang/Documents/private-projects/canvas-poster/src/type.ts"]}
